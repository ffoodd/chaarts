<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Pie charts — chaarts</title>
	<meta property="og:url" content="https://ffoodd.github.io/chaarts/pie-charts.html">
	<meta property="og:title" content="Pie charts — chaarts">
	<meta property="og:type" content="article">
	<meta property="og:description" name="description" content="Charts with HTML & CSS">
	<meta name="twitter:card" content="summary">
	<script>document.documentElement.classList.replace('no-js', 'js');</script>
	<link rel="icon" href="favicon.svg" type="image/svg+xml">
	<link rel="stylesheet" href="css/styles.min.css" media="all">
	<link rel="stylesheet" href="css/chaarts.min.css" media="all">
	<link rel="stylesheet" href="css/print.min.css" media="print">
</head>
<body itemscope itemtype="http://schema.org/WebPage">
<header role="banner" class="d-flex">
		<div class="skip-links visually-hidden visually-hidden-focusable">
			<a href="#nav">Skip to main navigation</a>
			<a href="#main">Skip to content</a>
		</div>

	<nav role="navigation" id="nav" aria-label="Main navigation">
	<ul class="fly-out">
		<li><a href="./index.html">Home</a></li>
		<li><a href="./bar-charts.html">Bar charts</a></li>
		<li><a href="./line-charts.html">Line charts</a></li>
		<li><a href="./column-charts.html">Column charts</a></li>
		<li><a aria-current="page">Pie charts</a></li>
		<li><a href="./radar-charts.html">Radar charts</a></li>
		<li>
			<a href="https://github.com/ffoodd/chaarts/" class="d-flex">
				<svg viewBox="0 0 16 16" height="24" width="24" role="img" aria-label="GitHub">
					<path fill-rule="evenodd"
								d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
				</svg>
			</a>
		</li>
	</ul>
	</nav>
		<div role="group" aria-label="Color scheme selection" id="theme" class="toggle no-js-hidden mis-auto high-contrast-hidden">
			<button type="button" title="Dark mode"
							data-scheme="dark" aria-pressed="false">
				<svg width="24" height="24" role="img" aria-label="Dark mode" class="mi-auto no-padding">
					<path d="M3 11.98A9.81 9.81 0 0012.57 22a9.53 9.53 0 008.3-5.06 1 1 0 00-.94-1.48l-.1.01a5.2 5.2 0 01-.4.02 7.81 7.81 0 01-7.58-8.01 8.38 8.38 0 011.02-4A1 1 0 0011.92 2 9.86 9.86 0 003 11.98zm7.34-7.65a10.38 10.38 0 00-.48 3.15 9.89 9.89 0 008.28 9.92 7.4 7.4 0 01-5.57 2.6A7.81 7.81 0 015 11.98a8 8 0 015.34-7.65z"></path>
				</svg>
			</button>
			<button type="button"	title="Light mode"
							data-scheme="light" aria-pressed="false">
				<svg width="24" height="24" role="img" aria-label="Light mode" class="mi-auto no-padding">
					<path d="M12 18a6 6 0 10-6-6 6 6 0 006 6zm0-10a4 4 0 11-4 4 4 4 0 014-4zM12 4a1 1 0 001-1V2a1 1 0 00-2 0v1a1 1 0 001 1zM11 21v1a1 1 0 002 0v-1a1 1 0 00-2 0zM18.36 6.64a1 1 0 00.71-.3l.7-.7a1 1 0 00-1.4-1.42l-.71.7a1 1 0 00.7 1.72zM4.93 17.66l-.7.7a1 1 0 101.4 1.42l.71-.7a1 1 0 00-1.41-1.42zM22 11h-1a1 1 0 000 2h1a1 1 0 000-2zM2 13h1a1 1 0 000-2H2a1 1 0 000 2zM17.66 17.66a1 1 0 000 1.41l.7.7a1 1 0 001.42-1.4l-.7-.71a1 1 0 00-1.42 0zM4.93 6.34a1 1 0 001.41-1.41l-.7-.7a1 1 0 00-1.42 1.4z"></path>
				</svg>
			</button>
			<button type="button"	title="System default"
							data-scheme="none" aria-pressed="false">
				<svg width="24" height="24" role="img" aria-label="System default" class="mx-auto no-padding" viewBox="17 -18 100 100">
					<path d="M104.5 36.2h8.3c4.2 0 4.2 0 4.2-4.2s0-4.2-4.2-4.2h-8.3c-4.2 0-4.2 0-4.2 4.2s0 4.2 4.2 4.2zM67-1.3c4.2 0 4.2 0 4.2-4.2v-8.3c0-4.2 0-4.2-4.2-4.2s-4.2 0-4.2 4.2v8.3c0 4.2 0 4.2 4.2 4.2zm29.5 68.6c2.9 2.9 2.9 2.9 5.8 0 3-2.9 3-2.9 0-5.9l-5.8-5.8c-3-3-3-3-5.9 0-2.9 2.9-2.9 2.9 0 5.8zM37.6 8.4c2.9 2.9 2.9 2.9 5.8 0 3-2.9 3-2.9 0-5.9l-5.8-5.8c-3-3-3-3-5.9 0-2.9 2.9-2.9 2.9 0 5.8zM67 57a25 25 0 0 0 24.1-31.6l-7.4 7.5a16.8 16.8 0 0 1-15.8 15.8l-7.5 7.5c2.1.5 4.4.8 6.6.8zm-14.6-4.7 6.1-6A16.6 16.6 0 0 1 50.3 32c0-9.2 7.5-16.7 16.7-16.7 6.1 0 11.4 3.3 14.3 8.2l6-6a25 25 0 1 0-34.9 34.8zM67 82c4.2 0 4.2 0 4.2-4.2v-8.3c0-4.2 0-4.2-4.2-4.2s-4.2 0-4.2 4.2v8.3c0 4.2 0 4.2 4.2 4.2zM21.2 36.2h8.3c4.2 0 4.2 0 4.2-4.2s0-4.2-4.2-4.2h-8.3c-4.2 0-4.2 0-4.2 4.2s0 4.2 4.2 4.2zm10.5 31.1c2.9 2.9 2.9 2.9 5.9 0l64.8-64.8c3-3 3-2.9 0-5.8-2.9-3-2.8-2.9-5.8 0L31.7 61.4c-3 3-2.9 3 0 5.9z"/>
				</svg>
			</button>
		</div>
</header>

<main role="main" id="main" tabindex="-1" itemprop="mainContentOfPage">
	<h1>Pie charts</h1>

	<p>
		The pie chart is used for <strong>representations of percentage proportions</strong>.
		It relies on CSS variables, an outrageous abuse of <code>calc()</code>,
		<code>display: table-*</code>, <code>clip-path</code>, <code>mask-image</code>,
		<code>transform</code> and a bit of <abbr title="Scalable Vectors Graphics">SVG</abbr>
		to distinguish each area. Yes, I know how to laugh. How do we use it?
	</p>

	<ol>
		<li>
			<strong>On each header</strong> <code>&lt;th&gt;</code>, a <var>--color</var>
			custom property allows you to assign, well… a color.
		</li>
		<li>
			<strong>Then each cell</strong> <code>&lt;td&gt;</code> must contain the value
			and its unit, as well as a <code>style</code> attribute to carry some variables:
			<ol>
				<li>
					<var>--value</var> is the percentage value,
					useful for determining <strong>the angle</strong> the element should occupy on the circle.
					All points of the <code>polygon()</code> —&nbsp;used to draw the pie part thanks to <code>clip-path</code>&nbsp;—
					depend on this value (read <a href="#calculation-twist">the technical note after
						the example for details of the calculations</a>).
				</li>
				<li>
					<var>--start</var> is used to define the <strong>starting point</strong>
					of the arc on the circle. It's the sum of the previous definitions, and is applied
					to the <code>rotate()</code> function of the <code>transform</code> poperty.
				</li>
				<li>
					And finally a series of <em>pseudo-boolean</em> variables, each worthing <var>0</var> or <var>1</var>
					—&nbsp;according to and idea of <a href="https://www.kizu.ru/conditions-for-css-variables/">
						<strong>Roman Komarov</strong> in <cite>Conditions for CSS variables</cite></a>&nbsp;—
					depend on the value: <var>--lt-25</var>, <var>--gt-25</var>, <var>--lt-50</var>…
					They allow to <strong>toggle the points</strong> from their original position
					(<code>50% 50%</code>) to their calculated position, by adding or subtracting from the initial value
					using <code>min()</code> and <code>max()</code> comparison functions;
				</li>
			</ol>
		</li>
		<li>
			a <code>::before</code> <strong>pseudo-element</strong> on each cell <code>&lt;td&gt;</code>is formatted
			in a clever way according to all our variables, including <code>transform</code>,
			<code>clip-path</code> and <code>mask-image</code>.
			<ul>
				<li>
					Since <code>clip-path</code> still requires <a href="https://caniuse.com/#search=clip-path">
						a <code>-webkit-</code> vendor prefix for Safari</a> and <code>mask-image</code>
					<a href="https://caniuse.com/#search=mask-image">for WebKit based browsers</a>,
					we use a CSS custom property to <strong>to prevent duplicate (long) values for those properties</strong>
					—&nbsp;<a href="https://css-irl.info/7-uses-for-css-custom-properties/">trick
						shared by <strong>Michelle Barker</strong> in <cite>7 uses for CSS custom properties</cite></a>.
				</li>
			</ul>
		</li>
		<li>
			a <code>::after</code> <strong>pseudo-element</strong> is used as a tooltip, to summarize header and value for
			each cell
			—but the display of custom properties in a pseudo-element is not so trivial:
			<ul>
				<li>
					<code>content</code> only accepts strings, and our custom properties contains… number.
				</li>
				<li>
					Once again we recycle <a href="https://codepen.io/cassie-codes/pen/22ea69e0f681d45f2f4c2ca5e6acf4ab">
						a <strong>Cassie Evans</strong>'s trick based on <code>counter-reset</code> and its default value
						to <strong>convert</strong> our <var>--value</var> custom property into a string</a>.
				</li>
				<li>
					However <code>counter-reset</code> requires an integer, and we may have a floating number.
					We first need to make sure we're using an integer, so we rely on
					<a href="https://css-tricks.com/animating-number-counters/#the-new-school-css-solution"><strong>Carter Li</strong>'s
						ruse
						to use <code>calc()</code> to wrap our value—&nbsp;and <code>@property</code> for Chromium-based
						browsers</a>.
					Boum!
				</li>
			</ul>
		</li>
		<li>
			And finally <strong>a pattern</strong> is applied to the background,
			in order to better associate it visually with the corresponding legend.
		</li>
	</ol>


	<div class="chaarts-container pie-container" role="group" aria-labelledby="caption-5">
		<div class="fieldset d-flex mbe-0 pi-1 sm-hidden no-js-hidden">
			<p class="label no-margin">
				<strong id="label-5">Switch</strong><br>
				<span id="description-5">Allows you to disable styles on the following table.</span>
			</p>
			<button type="button" class="mis-auto fw-400 no-border p-relative disable-css"
							role="switch" aria-checked="true"
							aria-labelledby="label-5" aria-describedby="description-5">
				<span>Funny</span>
				<span>Sober</span>
			</button>
		</div>

		<table class="chaarts pie" id="pie">
			<caption id="caption-5">
				Distribution of the weight of resources for
				<a href="https://www.ffoodd.fr" target="_blank" rel="noopener noreferrer">ffoodd.fr</a>
			</caption>
			<thead class="sr-only">
			<tr>
				<th scope="col">Resource</th>
				<th scope="col">Proportion</th>
			</tr>
			</thead>
			<tbody>
				<tr style="--color: var(--chaarts-purple);--term: 'HTML';">
		<th scope="row">HTML</th>
		<td style="--value: 2; --start: 0; --lt-25: 1; --gt-25: 0; --lt-50: 1; --gt-50: 0; --lt-75: 1; --gt-75: 0;">
			2&nbsp;%		</td>
	</tr>

				<tr style="--color: var(--chaarts-pink);--term: 'CSS';">
		<th scope="row">CSS</th>
		<td style="--value: 2; --start: 2; --lt-25: 1; --gt-25: 0; --lt-50: 1; --gt-50: 0; --lt-75: 1; --gt-75: 0;">
			2&nbsp;%		</td>
	</tr>

				<tr style="--color: var(--chaarts-blue);--term: 'JS';">
		<th scope="row">JS</th>
		<td style="--value: 32; --start: 4; --lt-25: 0; --gt-25: 1; --lt-50: 1; --gt-50: 0; --lt-75: 1; --gt-75: 0;">
			32&nbsp;%		</td>
	</tr>

				<tr style="--color: var(--chaarts-yellow);--term: 'Json';">
		<th scope="row">Json</th>
		<td style="--value: 1; --start: 36; --lt-25: 1; --gt-25: 0; --lt-50: 1; --gt-50: 0; --lt-75: 1; --gt-75: 0;">
			1&nbsp;%		</td>
	</tr>

				<tr style="--color: var(--chaarts-green);--term: 'Images';">
		<th scope="row">Images</th>
		<td style="--value: 44; --start: 37; --lt-25: 0; --gt-25: 1; --lt-50: 1; --gt-50: 0; --lt-75: 1; --gt-75: 0;">
			44&nbsp;%		</td>
	</tr>

				<tr style="--color: var(--chaarts-red);--term: 'Webfonts';">
		<th scope="row">Webfonts</th>
		<td style="--value: 17; --start: 81; --lt-25: 1; --gt-25: 0; --lt-50: 1; --gt-50: 0; --lt-75: 1; --gt-75: 0;">
			17&nbsp;%		</td>
	</tr>

				<tr style="--color: var(--chaarts-gray);--term: 'Other';">
		<th scope="row">Other</th>
		<td style="--value: 2; --start: 98; --lt-25: 1; --gt-25: 0; --lt-50: 1; --gt-50: 0; --lt-75: 1; --gt-75: 0;">
			2&nbsp;%		</td>
	</tr>

			</tbody>
		</table>
	</div>

	<details>
		<summary>A bit of trigonometry</summary>
		<div>
			<p>
				In this graph, each portion represents an arc of a circle based on an angle (part of 360 degrees).
				To define the shape of this portion, a point must be placed <strong>on the circle</strong>.
			</p>
			<p>
				To do this, I divide the circle into four squares. The position of the point on the circle
				can then be calculated using the properties of the right-angled triangle formed by:
			</p>
			<ol>
				<li>the center of the circle,</li>
				<li>the point we're trying to position,</li>
				<li>and the point perpendicular to the radius and passing through our target point.</li>
			</ol>
			<p>
				We know <strong>the hypotenuse</strong> of this triangle —&nbsp;the radius of the circle&nbsp;—,
				and <strong>the angle formed by the hypotenuse and starting from the center of the circle</strong>
				(reducing the value to 90 degrees, since the circle is divided into four square sectors:
				if the value is greater than 25: minus 90°, etc.)
				—&nbsp;plus a right angle, of course.
			</p>
			<h2>Law of sines</h2>
			<p>
				We can therefore <a href="https://en.wikipedia.org/wiki/Law_of_sines">use the sine law</a>
				to measure each side, and thus obtain the position of the point on the circle.
				Meaning we need to calculate the sine… Fortunately, CSS got you covered with the <code>sin()</code> function.
			</p>
			<p>
				All that remains is to use these dimensions to place the points of the polygon.
				<strong>It's child's play!</strong>
			</p>
		</div>
	</details>
	<details>
		<summary><abbr title="HyperText Markup Language" aria-label="HyperText Markup Language">HTML</abbr></summary>
		<div><pre class="scrollable-container"><code class="language-markup">&lt;table class="chaarts pie"&gt;
	&lt;caption id="caption-5"&gt;[…]&lt;/caption&gt;
	&lt;thead class="sr-only"&gt;
		&lt;tr&gt;
			&lt;th scope="col"&gt;[…]&lt;/th&gt;
			&lt;th scope="col"&gt;[…]&lt;/th&gt;
		&lt;/tr&gt;
	&lt;/thead&gt;
	&lt;tbody&gt;
		&lt;tr style="--color: var(--chaarts-purple); --term: 'HTML';"&gt;
			&lt;th scope="row"&gt;HTML&lt;/th&gt;
			&lt;td style="--value: 2; --start: 0;"&gt;2&nbsp;%&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;[…]&lt;/tr&gt;
	&lt;/tbody&gt;
&lt;/table&gt;</code></pre>
</div>
	</details>
	<details>
		<summary><abbr title="Cascading StyleSheet" aria-label="Cascading StyleSheet">css</abbr></summary>
		<div>
			<pre class="scrollable-container"><code class="language-css">@charset &quot;UTF-8&quot;;
.chaarts.pie {
  --radius: 32em;
  margin: 0 auto;
  padding-block-start: calc(var(--radius) - 2rem);
  position: relative;
}

.chaarts.pie tbody {
  display: table-row;
}

.chaarts.pie tr {
  display: table-cell;
  transition: opacity 0.3s var(--move);
}

.chaarts.pie tr:nth-of-type(1n + 1) {
  --background: var(--checkers);
}

.chaarts.pie tr:nth-of-type(2n + 2) {
  --background: var(--hexagons);
}

.chaarts.pie tr:nth-of-type(3n + 3) {
  --background: var(--triangles);
}

.chaarts.pie tr:nth-of-type(4n + 4) {
  --background: var(--zig);
}

.chaarts.pie tr:nth-of-type(5n + 5) {
  --background: var(--stripes);
}

.chaarts.pie tr:nth-of-type(6n + 6) {
  --background: var(--dots);
}

.chaarts.pie [scope=row] {
  padding-inline-end: 0.5rem;
}

.chaarts.pie [scope=row]::before {
  background: var(--color, currentcolor) var(--background);
  block-size: 1rem;
  content: &quot;&quot;;
  display: inline-block;
  inline-size: 1rem;
  translate: calc(-0.2rem * var(--is-rtl, 1)) 0.1rem 0;
}

.chaarts.pie td {
  --position: calc(var(--start, 0) * .01turn);
}

.chaarts.pie td::after,
.chaarts.pie td::before {
  inset-block-start: calc(var(--radius) / 2);
  inset-inline-start: 50%;
  position: absolute;
  transform-origin: center;
}

[dir=rtl] .chaarts.pie td::after {
  inset-inline-start: 40%;
}

.chaarts.pie td::before {
  --zoom: .75;
  --part: calc(var(--value) * 3.6);
  --main-angle: calc(var(--part) - (90 * (var(--gt-25, 0) + var(--gt-50, 0) + var(--gt-75, 0))));
  --β: calc(var(--main-angle) * var(--to-radians));
  --α: calc((90 - var(--main-angle)) * var(--to-radians));
  --sin-β: sin(var(--β));
  --sin-α: sin(var(--α));
  --pos-B: calc(var(--sin-β) * 50);
  --pos-A: calc(var(--sin-α) * 50);
  --polygon: polygon(
  		50% 50%,
  		50% 0%,
  		100% 0%,
  		max(50% + (var(--pos-B) * 1%), var(--gt-25, 0) * 100%) calc(50% - (var(--pos-A) * var(--lt-25, 1) * 1%)),
  		max(50%, var(--gt-25, 0) * 100%) max(50%, var(--gt-25, 0) * 100%),
  		max(50% + (var(--pos-A) * 1%), var(--gt-50, 0) * 100%) max(50% + (var(--pos-B) * var(--lt-50, 0) * 1%), var(--gt-50, 0) * 100%),
  		max(0%, var(--lt-50, 0) * 50%) max(50%, var(--gt-50, 0) * 100%),
  		min(50% - (var(--pos-B) * var(--gt-75, 0) * 1%), 0%) calc(50% + (var(--pos-A) * var(--lt-75, 1) * 1%)),
  		max(0%, var(--lt-75, 0) * 50%) max(0%, var(--lt-75, 0) * 50%),
  		calc(50% - (var(--pos-A) * var(--gt-75, 0) * 1%)) calc(50% - (var(--pos-B) * var(--gt-75, 0) * 1%)),
  		50% 50%
  );
  --mask: radial-gradient(
  		circle at center,
  		#ffff 0 calc((var(--radius) / 2) - 1px),
  		#0000 0
  );
  background: var(--color, currentcolor) var(--background);
  block-size: var(--radius);
  border-radius: 50%;
  clip-path: var(--polygon);
  content: &quot;&quot;;
  inline-size: var(--radius);
  mask-image: var(--mask);
  transform: translate3d(calc(-50% * var(--is-rtl, 1)), -50%, 0) rotate(var(--position)) scale(var(--zoom));
  transition: transform 0.2s var(--move);
}

.chaarts.pie tr:hover td::before {
  --zoom: .8;
}

.chaarts.pie td::after {
  --arrow: calc(100% - 0.25rem);
  --axis: calc(var(--position) - .25turn + var(--value) * .005turn);
  --away: calc(var(--radius) / 2 - 1rem);
  --integer: calc(var(--value));
  background-color: var(--foreground-lighter);
  color: var(--background-lighter);
  content: var(--term) &quot; : &quot; counter(value) &quot; %&quot;;
  counter-reset: value var(--integer);
  opacity: 0;
  padding: 0.5rem;
  pointer-events: none;
  transform: translate3d(-50%, -50%, 0) rotate(var(--axis)) translate(var(--away)) rotate(calc(var(--axis) * -1)) perspective(1000px) rotate3d(1, 0, 0, 45deg);
  transform-origin: 50% calc(100% + 10px);
  transition: opacity 0.2s var(--enter), transform 0.2s var(--enter);
}

.chaarts.pie tbody:hover tr {
  opacity: 0.5;
}

.chaarts.pie tbody:hover tr:hover {
  opacity: 1;
}

.chaarts.pie tbody:hover tr:hover td::after {
  opacity: 1;
  transform: translate3d(-50%, -50%, 0) rotate(var(--axis)) translate(var(--away)) rotate(calc(var(--axis) * -1)) perspective(1000px) rotate3d(1, 0, 0, 0deg);
  transition: opacity 0.2s var(--exit), transform 0.2s var(--exit);
}
</code></pre>
		</div>
	</details>
	<details id="calculation-twist">
		<summary>The calculation twist</summary>
		<h3>The positions of the polygon</h3>
		<p>
			The use of pseudo-Boolean variables makes this calculation pseudo-algorithmic.
			Let's start with an essential pre-requisite: the polygon being a closed shape and CSS
			not being magical, <strong>points must pre-exist</strong>.
			Spoiler, we need eleven points:
		</p>
		<ol>
			<li>
				<strong>The initial axis</strong>, from centre upwards: <code>50% 50%</code>
				and <code>50% 0%</code>.
			</li>
			<li>
				<strong>One point for each angle</strong> at the ends: the first one is fixed, at
				<code>100% 0%</code> (top right) —&nbsp;then each of the other angles has
				<strong>two states</strong>, reached or not reached. Some insights:
				<ul>
					<li>
						For example, the point at the bottom right concerns values between 25% and 50%:
						if the value is less than 25%, it must be in the centre (so as not to interfere
						with the drawing), and if not, it must be in its corner:
						<code>max(50%, var(--gt-25, 0) * 100%) max(50%, var(--gt-25, 0) * 100%)</code><br>
						Thus the calculated value will be <code>50% 50%</code> if <var>--gt-25</var> is 0,
						and <code>100% 100%</code> if <var>--gt-25</var> is 1.
					</li>
					<li>
						In addition, each angle has its target coordinate:
						<code>100% 100%</code> for bottom right, <code>0% 100%</code> for bottom left,
						<code>0% 0%</code> for top left. It is therefore necessary <strong>to sometimes subtract
							and sometimes add</strong> to the initial value <code>50% 50%</code>
						to switch to the right point.
					</li>
				</ul>
			</li>
			<li>
				<strong>One point for each possible position per quarter circle</strong>, corresponding
				to each 25% slice. Like the points at the corners, these points must be in the centre
				if they are not used. That's where we laugh the most:
				<ul>
					<li>we start from <code>50%</code>, to which we add or subtract the following calculation;</li>
					<li>
						then <strong>the calculated position</strong> is used —&nbsp;<var>--pos-A</var>
						or <var>--pos-B</var> as the case may be&nbsp;— which is converted into percentages using
						<code>* 1%</code>, and rendered inert if the value is less than the range concerned
						using <var>* var(--lt-25, 1)</var>, for example.<br>
						<small>
							Notice the second value in <code>var()</code>?
							This is the default value if the variable is not defined. Cool, isn't it?
						</small>
					</li>
					<li>
						finally <strong>when the range is exceeded</strong>, the point switches to
						<code>0%</code> or <code>100%</code> as appropriate.
					</li>
				</ul>
			</li>
			<li>
				And lastly, we <strong>lose the path by going back to the centre</strong> of the circle,
				at <code>50% 50%</code>.
			</li>
		</ol>
		<p>That's it!</p>
		<h4>The positions illustrated</h4>
		<p>
			These screenshots —&nbsp;taken in
			<a href="https://developer.mozilla.org/en-US/docs/Tools/Page_Inspector/How_to/Edit_CSS_shapes">the shape editor of
				the
				Firefox devtools</a>&nbsp;—
			show the points of the polygon in the different cases.
			You can see for each cited value the resolved polygon for <code>clip-path</code>
			—&nbsp;and see how the dynamic values tilt from one position to another.
		</p>
		<ul class="no-list">
			<li>
				<figure aria-label="Rendering example for 44%.">
					<figcaption class="no-padding h5">Rendering example for <var>44%</var></figcaption>
					<div class="grid-2">
						<figure aria-label="Shape screenshot for  44%." class="mbe-0 pbe-0">
							<img src="img/pie-1.jpg" alt="clip-path shape with a value of 44%: six visible points." width="264"
									 height="264">
							<figcaption>Shape screenshot for <var>44%</var>.</figcaption>
						</figure>
						<figure aria-label="Code generated for 44%." class="mbe-0 pbe-0">
<pre class="scrollable-container" data-line="8"><code class="language-css">td[style*="--value: 44;"]::before {
	clip-path: polygon(
		50% 50%,
		50% 0%,
		100% 0%,
		100% 50%,
		100% 100%,
		95.2413525% 71.2889645%,
		50% 50%,
		50% 50%,
		50% 50%,
		50% 50%,
		50% 50%
	);
}</code></pre>
							<figcaption>Code generated for <var>44%</var>.</figcaption>
						</figure>
					</div>
				</figure>
			</li>
			<li>
				<figure aria-label="Rendering example for 64%.">
					<figcaption class="no-padding h5">Rendering example for <var>64%</var></figcaption>
					<div class="grid-2">
						<figure aria-label="Shape screenshot for  64%." class="mbe-0 pbe-0">
							<img src="img/pie-2.jpg" alt="clip-path shape with a value of 64%: seven visible points." width="264"
									 height="264">
							<figcaption>Shape screenshot for <var>64%</var>.</figcaption>
						</figure>
						<figure aria-label="Code generated for 64%." class="mbe-0 pbe-0">
<pre class="scrollable-container" data-line="10"><code class="language-css">td[style*="--value: 64;"]::before {
	clip-path: polygon(
		50% 50%,
		50% 0%,
		100% 0%,
		100% 50%,
		100% 100%,
		100% 100%,
		0% 100%,
		11.474338% 81.8711995%,
		50% 50%,
		50% 50%,
		50% 50%
	);
}</code></pre>
							<figcaption>Code generated for <var>64%</var>.</figcaption>
						</figure>
					</div>
				</figure>
			</li>
			<li>
				<figure aria-label="Rendering example for 88%.">
					<figcaption class="no-padding h5">Rendering example for <var>88%</var></figcaption>
					<div class="grid-2">
						<figure aria-label="Shape screenshot for  88%." class="mbe-0 pbe-0">
							<img src="img/pie-3.jpg" alt="clip-path shape with a value of 88%: nine visible points." width="264"
									 height="264">
							<figcaption>Shape screenshot for <var>88%</var>.</figcaption>
						</figure>
						<figure aria-label="Code generated for 88%." class="mbe-0 pbe-0">
<pre class="scrollable-container" data-line="12"><code class="language-css">td[style*="--value: 88;"]::before {
	clip-path: polygon(
		50% 50%,
		50% 0%,
		100% 0%,
		100% 50%,
		100% 100%,
		100% 100%,
		0% 100%,
		0% 50%,
		0% 0%,
		15.7726445% 13.5515685%,
		50% 50%
	);
}</code></pre>
							<figcaption>Code generated for <var>88%</var>.</figcaption>
						</figure>
					</div>
				</figure>
			</li>
		</ul>
	</details>

	<div class="grid-2">
		<div class="chaarts-container pie-container" role="group" aria-labelledby="caption-12">
			<div class="fieldset d-flex mbe-0 pi-1 sm-hidden no-js-hidden">
				<p class="label no-margin">
					<strong id="label-12">Switch</strong><br>
					<span id="description-12">Allows you to disable styles on the following table.</span>
				</p>
				<button type="button" class="mis-auto fw-400 no-border p-relative disable-css"
								role="switch" aria-checked="true"
								aria-labelledby="label-12" aria-describedby="description-12">
					<span>Funny</span>
					<span>Sober</span>
				</button>
			</div>

			<table class="chaarts pie">
				<caption id="caption-12">Pie chart example with a value between 50 and 75%</caption>
				<thead class="sr-only">
				<tr>
					<th scope="col">Resource</th>
					<th scope="col">Proportion</th>
				</tr>
				</thead>
				<tbody>
						<tr style="--color: var(--chaarts-purple);--term: 'HTML';">
		<th scope="row">HTML</th>
		<td style="--value: 2; --start: 0; --lt-25: 1; --gt-25: 0; --lt-50: 1; --gt-50: 0; --lt-75: 1; --gt-75: 0;">
			2&nbsp;%		</td>
	</tr>

						<tr style="--color: var(--chaarts-pink);--term: 'CSS';">
		<th scope="row">CSS</th>
		<td style="--value: 2; --start: 2; --lt-25: 1; --gt-25: 0; --lt-50: 1; --gt-50: 0; --lt-75: 1; --gt-75: 0;">
			2&nbsp;%		</td>
	</tr>

						<tr style="--color: var(--chaarts-blue);--term: 'JS';">
		<th scope="row">JS</th>
		<td style="--value: 32; --start: 4; --lt-25: 0; --gt-25: 1; --lt-50: 1; --gt-50: 0; --lt-75: 1; --gt-75: 0;">
			32&nbsp;%		</td>
	</tr>

						<tr style="--color: var(--chaarts-green);--term: 'Images';">
		<th scope="row">Images</th>
		<td style="--value: 64; --start: 36; --lt-25: 0; --gt-25: 1; --lt-50: 0; --gt-50: 1; --lt-75: 1; --gt-75: 0;">
			64&nbsp;%		</td>
	</tr>

				</tbody>
			</table>
		</div>

		<div class="chaarts-container pie-container" role="group" aria-labelledby="caption-13">
			<div class="fieldset d-flex mbe-0 pi-1 sm-hidden no-js-hidden">
				<p class="label no-margin">
					<strong id="label-13">Switch</strong><br>
					<span id="description-13">Allows you to disable styles on the following table.</span>
				</p>
				<button type="button" class="mis-auto fw-400 no-border p-relative disable-css"
								role="switch" aria-checked="true"
								aria-labelledby="label-13" aria-describedby="description-13">
					<span>Funny</span>
					<span>Sober</span>
				</button>
			</div>

			<table class="chaarts pie">
				<caption id="caption-13">Pie chart example with a value greater than 75%</caption>
				<thead class="sr-only">
				<tr>
					<th scope="col">Resource</th>
					<th scope="col">Proportion</th>
				</tr>
				</thead>
				<tbody>
					<tr style="--color: var(--chaarts-green);--term: 'Images';">
		<th scope="row">Images</th>
		<td style="--value: 88; --start: 0; --lt-25: 0; --gt-25: 1; --lt-50: 0; --gt-50: 1; --lt-75: 0; --gt-75: 1;">
			88&nbsp;%		</td>
	</tr>

					<tr style="--color: var(--chaarts-purple);--term: 'HTML';">
		<th scope="row">HTML</th>
		<td style="--value: 2; --start: 88; --lt-25: 1; --gt-25: 0; --lt-50: 1; --gt-50: 0; --lt-75: 1; --gt-75: 0;">
			2&nbsp;%		</td>
	</tr>

					<tr style="--color: var(--chaarts-pink);--term: 'CSS';">
		<th scope="row">CSS</th>
		<td style="--value: 2; --start: 90; --lt-25: 1; --gt-25: 0; --lt-50: 1; --gt-50: 0; --lt-75: 1; --gt-75: 0;">
			2&nbsp;%		</td>
	</tr>

					<tr style="--color: var(--chaarts-blue);--term: 'JS';">
		<th scope="row">JS</th>
		<td style="--value: 8; --start: 92; --lt-25: 1; --gt-25: 0; --lt-50: 1; --gt-50: 0; --lt-75: 1; --gt-75: 0;">
			8&nbsp;%		</td>
	</tr>

				</tbody>
			</table>
		</div>
	</div>

	<h2>Donut</h2>

	<p>
		On the <code>&lt;table&gt;</code> element, we add an <var>--offset</var> variable
		that allows us to determine the size of the hole of the donut,
		generated using <code>mask-image</code> and <code>radial-gradient()</code>.
		<a href="https://codepen.io/thebabydino/pens/tags/?selected_tag=mask"><strong>Ana Tudor</strong> has made
			many examples of using <code>mask-*</code> on CodePen</a>, have a look!
	</p>

	<div class="chaarts-container pie-container" role="group" aria-labelledby="caption-6">
		<div class="fieldset d-flex mbe-0 pi-1 sm-hidden no-js-hidden">
			<p class="label no-margin">
				<strong id="label-6">Switch</strong><br>
				<span id="description-6">Allows you to disable styles on the following table.</span>
			</p>
			<button type="button" class="mis-auto fw-400 no-border p-relative disable-css"
							role="switch" aria-checked="true"
							aria-labelledby="label-6" aria-describedby="description-6">
				<span>Funny</span>
				<span>Sober</span>
			</button>
		</div>

		<table class="chaarts pie donut" id="donut" style="--offset: 8rem;">
			<caption id="caption-6">
				Distribution of the weight of resources for
				<a href="https://www.ffoodd.fr" target="_blank" rel="noopener noreferrer">ffoodd.fr</a>
			</caption>
			<thead class="sr-only">
			<tr>
				<th scope="col">Resource</th>
				<th scope="col">Proportion</th>
			</tr>
			</thead>
			<tbody>
				<tr style="--color: var(--chaarts-purple);--term: 'HTML';">
		<th scope="row">HTML</th>
		<td style="--value: 2; --start: 0; --lt-25: 1; --gt-25: 0; --lt-50: 1; --gt-50: 0; --lt-75: 1; --gt-75: 0;">
			2&nbsp;%		</td>
	</tr>

				<tr style="--color: var(--chaarts-pink);--term: 'CSS';">
		<th scope="row">CSS</th>
		<td style="--value: 2; --start: 2; --lt-25: 1; --gt-25: 0; --lt-50: 1; --gt-50: 0; --lt-75: 1; --gt-75: 0;">
			2&nbsp;%		</td>
	</tr>

				<tr style="--color: var(--chaarts-blue);--term: 'JS';">
		<th scope="row">JS</th>
		<td style="--value: 32; --start: 4; --lt-25: 0; --gt-25: 1; --lt-50: 1; --gt-50: 0; --lt-75: 1; --gt-75: 0;">
			32&nbsp;%		</td>
	</tr>

				<tr style="--color: var(--chaarts-yellow);--term: 'Json';">
		<th scope="row">Json</th>
		<td style="--value: 1; --start: 36; --lt-25: 1; --gt-25: 0; --lt-50: 1; --gt-50: 0; --lt-75: 1; --gt-75: 0;">
			1&nbsp;%		</td>
	</tr>

				<tr style="--color: var(--chaarts-green);--term: 'Images';">
		<th scope="row">Images</th>
		<td style="--value: 44; --start: 37; --lt-25: 0; --gt-25: 1; --lt-50: 1; --gt-50: 0; --lt-75: 1; --gt-75: 0;">
			44&nbsp;%		</td>
	</tr>

				<tr style="--color: var(--chaarts-red);--term: 'Webfonts';">
		<th scope="row">Webfonts</th>
		<td style="--value: 17; --start: 81; --lt-25: 1; --gt-25: 0; --lt-50: 1; --gt-50: 0; --lt-75: 1; --gt-75: 0;">
			17&nbsp;%		</td>
	</tr>

				<tr style="--color: var(--chaarts-gray);--term: 'Other';">
		<th scope="row">Other</th>
		<td style="--value: 2; --start: 98; --lt-25: 1; --gt-25: 0; --lt-50: 1; --gt-50: 0; --lt-75: 1; --gt-75: 0;">
			2&nbsp;%		</td>
	</tr>

			</tbody>
		</table>
	</div>

	<details>
		<summary><abbr title="Cascading StyleSheet" aria-label="Cascading StyleSheet">css</abbr></summary>
		<div>
			<pre class="scrollable-container"><code class="language-css">.chaarts.pie.donut {
  --mask: radial-gradient(
  		circle at 50% calc(50% - 0.25rem),
  		#0000 0 var(--offset),
  		#ffff calc(var(--offset) + 1px) 100%
  );
  mask-image: var(--mask);
}

.chaarts.pie.donut td::after {
  --away: calc(var(--radius) / 2 - 2.5rem);
}
</code></pre>
		</div>
	</details>

	<div class="note">
		<h3>Conical gradient</h3>
		<p>
			The use of <code>conic-gradient()</code> is promising for this case.
			You'll find examples made by <strong>Ana Tudor</strong> and <strong>Lea Verou</strong>
			—&nbsp;who actually wrote the specification.
		</p>
		<p>
			<code>conic-gradient()</code> could be used in <code>mask-image</code> to replace <code>clip-path</code>
			and drop the entire trigonometry thing, however there's a drawback:
			since <code>mask</code> only clips visually, <strong>it prevents hovering other elements visible through the mask</strong>
			— while <code>clip-path</code> really clips content, thus allowing interaction through element's layer.
		</p>
		<p>
			If the current hovering interaction does not matter for you, you can change <code>.chaarts.pie td::before</code>
			by dropping every custom properties —except <code>--zoom</code>— and <code>clip-path</code>, and modifying
			<code>mask-image</code> to use <code>mask-image: conic-gradient(#ffff var(--value), #0000 0);</code> directly.
		</p>
		<p>
			<strong>Caution:</strong> your value needs to be in <code>%</code> now.
		</p>
	</div>

	<h2>Polar chart</h2>

	<p>
		For this variant, wa change almost nothing: only the <var>--zoom</var> variable
		and its implication in <strong>the scaling</strong> of portions using <code>scale()</code>.
	</p>

	<div class="chaarts-container pie-container" role="group" aria-labelledby="caption-10">
		<div class="fieldset d-flex mbe-0 pi-1 sm-hidden no-js-hidden">
			<p class="label no-margin">
				<strong id="label-10">Switch</strong><br>
				<span id="description-10">Allows you to disable styles on the following table.</span>
			</p>
			<button type="button" class="mis-auto fw-400 no-border p-relative disable-css"
							role="switch" aria-checked="true"
							aria-labelledby="label-10" aria-describedby="description-10">
				<span>Funny</span>
				<span>Sober</span>
			</button>
		</div>

		<table class="chaarts pie polar" id="polar">
			<caption id="caption-10">
				Distribution of the weight of resources for
				<a href="https://www.ffoodd.fr" target="_blank" rel="noopener noreferrer">ffoodd.fr</a>
			</caption>
			<thead class="sr-only">
			<tr>
				<th scope="col">Resource</th>
				<th scope="col">Proportion</th>
			</tr>
			</thead>
			<tbody>
				<tr style="--color: var(--chaarts-purple);--term: 'HTML';">
		<th scope="row">HTML</th>
		<td style="--value: 2; --start: 0; --lt-25: 1; --gt-25: 0; --lt-50: 1; --gt-50: 0; --lt-75: 1; --gt-75: 0;">
			2&nbsp;%		</td>
	</tr>

				<tr style="--color: var(--chaarts-pink);--term: 'CSS';">
		<th scope="row">CSS</th>
		<td style="--value: 2; --start: 2; --lt-25: 1; --gt-25: 0; --lt-50: 1; --gt-50: 0; --lt-75: 1; --gt-75: 0;">
			2&nbsp;%		</td>
	</tr>

				<tr style="--color: var(--chaarts-blue);--term: 'JS';">
		<th scope="row">JS</th>
		<td style="--value: 32; --start: 4; --lt-25: 0; --gt-25: 1; --lt-50: 1; --gt-50: 0; --lt-75: 1; --gt-75: 0;">
			32&nbsp;%		</td>
	</tr>

				<tr style="--color: var(--chaarts-yellow);--term: 'Json';">
		<th scope="row">Json</th>
		<td style="--value: 1; --start: 36; --lt-25: 1; --gt-25: 0; --lt-50: 1; --gt-50: 0; --lt-75: 1; --gt-75: 0;">
			1&nbsp;%		</td>
	</tr>

				<tr style="--color: var(--chaarts-green);--term: 'Images';">
		<th scope="row">Images</th>
		<td style="--value: 44; --start: 37; --lt-25: 0; --gt-25: 1; --lt-50: 1; --gt-50: 0; --lt-75: 1; --gt-75: 0;">
			44&nbsp;%		</td>
	</tr>

				<tr style="--color: var(--chaarts-red);--term: 'Webfonts';">
		<th scope="row">Webfonts</th>
		<td style="--value: 17; --start: 81; --lt-25: 1; --gt-25: 0; --lt-50: 1; --gt-50: 0; --lt-75: 1; --gt-75: 0;">
			17&nbsp;%		</td>
	</tr>

				<tr style="--color: var(--chaarts-gray);--term: 'Other';">
		<th scope="row">Other</th>
		<td style="--value: 2; --start: 98; --lt-25: 1; --gt-25: 0; --lt-50: 1; --gt-50: 0; --lt-75: 1; --gt-75: 0;">
			2&nbsp;%		</td>
	</tr>

			</tbody>
		</table>
	</div>

	<details>
		<summary><abbr title="Cascading StyleSheet" aria-label="Cascading StyleSheet">css</abbr></summary>
		<div>
			<pre class="scrollable-container"><code class="language-css">.chaarts.pie.polar td::before {
  --zoom: 50;
  transform: translate3d(calc(-50% * var(--is-rtl, 1)), -50%, 0) rotate(var(--position)) scale(calc((var(--zoom) + var(--value) / (100 / var(--zoom))) / 100));
}

.chaarts.pie.polar td::after {
  --away: calc((var(--radius) / 2) - ((var(--radius) / 4) * ((100 - var(--value)) / 100)) + 2.5rem);
}

.chaarts.pie.polar tr:hover td::before {
  --zoom: 50;
}
</code></pre>
		</div>
	</details>
</main>

	<script src="js/scripts.min.js"></script>
	<script src="js/prism.min.js"></script>

</body>
</html>
