<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Column charts — chaarts</title>
	<meta property="og:url" content="https://ffoodd.github.io/chaarts/column-charts.html">
	<meta property="og:title" content="Column charts — chaarts">
	<meta property="og:type" content="article">
	<meta property="og:description" name="description" content="Charts with HTML & CSS">
	<meta name="twitter:card" content="summary">
	<script>document.documentElement.classList.replace('no-js', 'js');</script>
	<link rel="icon" href="favicon.svg" type="image/svg+xml">
	<link rel="stylesheet" href="css/styles.min.css" media="all">
	<link rel="stylesheet" href="css/chaarts.min.css" media="all">
	<link rel="stylesheet" href="css/print.min.css" media="print">
</head>
<body itemscope itemtype="http://schema.org/WebPage">
<header role="banner" class="d-flex">
		<div class="skip-links visually-hidden visually-hidden-focusable">
			<a href="#nav">Skip to main navigation</a>
			<a href="#main">Skip to content</a>
		</div>

	<nav role="navigation" id="nav" aria-label="Main navigation">
	<ul class="fly-out">
		<li><a href="./index.html">Home</a></li>
		<li><a href="./bar-charts.html">Bar charts</a></li>
		<li><a href="./line-charts.html">Line charts</a></li>
		<li><a aria-current="page">Column charts</a></li>
		<li><a href="./pie-charts.html">Pie charts</a></li>
		<li><a href="./radar-charts.html">Radar charts</a></li>
		<li>
			<a href="https://github.com/ffoodd/chaarts/" class="d-flex">
				<svg viewBox="0 0 16 16" height="24" width="24" role="img" aria-label="GitHub">
					<path fill-rule="evenodd"
								d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
				</svg>
			</a>
		</li>
	</ul>
	</nav>
		<div role="group" aria-label="Color scheme selection" id="theme" class="toggle no-js-hidden mis-auto high-contrast-hidden">
			<button type="button" title="Dark mode"
							data-scheme="dark" aria-pressed="false">
				<svg width="24" height="24" role="img" aria-label="Dark mode" class="mi-auto no-padding">
					<path d="M3 11.98A9.81 9.81 0 0012.57 22a9.53 9.53 0 008.3-5.06 1 1 0 00-.94-1.48l-.1.01a5.2 5.2 0 01-.4.02 7.81 7.81 0 01-7.58-8.01 8.38 8.38 0 011.02-4A1 1 0 0011.92 2 9.86 9.86 0 003 11.98zm7.34-7.65a10.38 10.38 0 00-.48 3.15 9.89 9.89 0 008.28 9.92 7.4 7.4 0 01-5.57 2.6A7.81 7.81 0 015 11.98a8 8 0 015.34-7.65z"></path>
				</svg>
			</button>
			<button type="button"	title="Light mode"
							data-scheme="light" aria-pressed="false">
				<svg width="24" height="24" role="img" aria-label="Light mode" class="mi-auto no-padding">
					<path d="M12 18a6 6 0 10-6-6 6 6 0 006 6zm0-10a4 4 0 11-4 4 4 4 0 014-4zM12 4a1 1 0 001-1V2a1 1 0 00-2 0v1a1 1 0 001 1zM11 21v1a1 1 0 002 0v-1a1 1 0 00-2 0zM18.36 6.64a1 1 0 00.71-.3l.7-.7a1 1 0 00-1.4-1.42l-.71.7a1 1 0 00.7 1.72zM4.93 17.66l-.7.7a1 1 0 101.4 1.42l.71-.7a1 1 0 00-1.41-1.42zM22 11h-1a1 1 0 000 2h1a1 1 0 000-2zM2 13h1a1 1 0 000-2H2a1 1 0 000 2zM17.66 17.66a1 1 0 000 1.41l.7.7a1 1 0 001.42-1.4l-.7-.71a1 1 0 00-1.42 0zM4.93 6.34a1 1 0 001.41-1.41l-.7-.7a1 1 0 00-1.42 1.4z"></path>
				</svg>
			</button>
			<button type="button"	title="System default"
							data-scheme="none" aria-pressed="false">
				<svg width="24" height="24" role="img" aria-label="System default" class="mx-auto no-padding" viewBox="17 -18 100 100">
					<path d="M104.5 36.2h8.3c4.2 0 4.2 0 4.2-4.2s0-4.2-4.2-4.2h-8.3c-4.2 0-4.2 0-4.2 4.2s0 4.2 4.2 4.2zM67-1.3c4.2 0 4.2 0 4.2-4.2v-8.3c0-4.2 0-4.2-4.2-4.2s-4.2 0-4.2 4.2v8.3c0 4.2 0 4.2 4.2 4.2zm29.5 68.6c2.9 2.9 2.9 2.9 5.8 0 3-2.9 3-2.9 0-5.9l-5.8-5.8c-3-3-3-3-5.9 0-2.9 2.9-2.9 2.9 0 5.8zM37.6 8.4c2.9 2.9 2.9 2.9 5.8 0 3-2.9 3-2.9 0-5.9l-5.8-5.8c-3-3-3-3-5.9 0-2.9 2.9-2.9 2.9 0 5.8zM67 57a25 25 0 0 0 24.1-31.6l-7.4 7.5a16.8 16.8 0 0 1-15.8 15.8l-7.5 7.5c2.1.5 4.4.8 6.6.8zm-14.6-4.7 6.1-6A16.6 16.6 0 0 1 50.3 32c0-9.2 7.5-16.7 16.7-16.7 6.1 0 11.4 3.3 14.3 8.2l6-6a25 25 0 1 0-34.9 34.8zM67 82c4.2 0 4.2 0 4.2-4.2v-8.3c0-4.2 0-4.2-4.2-4.2s-4.2 0-4.2 4.2v8.3c0 4.2 0 4.2 4.2 4.2zM21.2 36.2h8.3c4.2 0 4.2 0 4.2-4.2s0-4.2-4.2-4.2h-8.3c-4.2 0-4.2 0-4.2 4.2s0 4.2 4.2 4.2zm10.5 31.1c2.9 2.9 2.9 2.9 5.9 0l64.8-64.8c3-3 3-2.9 0-5.8-2.9-3-2.8-2.9-5.8 0L31.7 61.4c-3 3-2.9 3 0 5.9z"/>
				</svg>
			</button>
		</div>
</header>

<main role="main" id="main" tabindex="-1" itemprop="mainContentOfPage">
	<h1>Column charts</h1>

	<p>
		Column chart is used for <strong>value distributions</strong>.
		The structure of the table is quite ordinary, but its formatting is based on
		<code>display: grid;</code> and especially <code>display: contents;</code> to
		<strong>facilitate the placement of the cells</strong> —&nbsp;technique inspired by
		<a href="https://hiddedevries.nl/en/blog/2018-04-21-more-accessible-markup-with-display-contents">
			<strong>Hidde De Vries</strong>'s article <cite>More accessible markup with <code>display: contents</code></cite></a>,
		and clarified by <a href="https://bitsofco.de/how-display-contents-works/">
			<strong>Ire Aderinokun</strong>'s post <cite>How <code>display: contents</code> works</cite></a>.
	</p>

	<p>The basic principle is the same as <a href="./bar-charts.html">the bar charts</a>:</p>
	<ol>
		<li>
			the first grid row is the reserved to display value in case it reaches scale's max value,
			with a fixed size of <code>2ex</code>
			— have a look to <a href="https://every-layout.dev/rudiments/units/#the-ch-and-ex-units">CSS
				units rudiments, documented in <em>Every Layout</em> by <strong>Andy Bell</strong> and <strong>Heydon Pickering</strong></a>&nbsp;;
		</li>
		<li>
			the <code>repeat()</code> function applied with the <var>--scale</var> custom property
			enables us to handle a dynamic scale;
		</li>
		<li>
			<code>&lt;thead&gt;</code>, <code>&lt;tbody&gt;</code> and <code>&lt;tr&gt;</code> containers
			are neutralized in the grid structure using <code>display: contents</code>;
		</li>
		<li>
			each cell is placed on the grid depending its <var>--value</var>
			—&nbsp;its background color also depending on its value;
		</li>
		<li>
			and finally its text value —&nbsp;wrapped in a <code>&lt;span&gt;</code> element&nbsp;—
			is positioned at the top of the column using the same trick as in the bar chart.
		</li>
	</ol>

	<div class="chaarts-container column-container" role="group" aria-labelledby="caption-7">
		<div class="fieldset d-flex pi-1 sm-hidden no-js-hidden">
			<p class="label no-margin">
				<strong id="label-7">Switch</strong><br>
				<span id="description-7">Allows you to disable styles on the following table.</span>
			</p>
			<button type="button" class="mis-auto fw-400 no-border p-relative disable-css"
							role="switch" aria-checked="true"
							aria-labelledby="label-7" aria-describedby="description-7">
				<span>Funny</span>
				<span>Sober</span>
			</button>
		</div>

		<table class="chaarts column-single" id="column" style="--y: 7;">
			<caption id="caption-7">Browser market shares in France in January 2019</caption>
			<thead>
			<tr>
				<th scope="row">Browser</th>
				<th scope="col">Chrome</th>
				<th scope="col">Firefox</th>
				<th scope="col">Safari</th>
				<th scope="col">Edge</th>
				<th scope="col">IE</th>
				<th scope="col">Others</th>
			</tr>
			</thead>
			<tbody>
			<tr>
				<th scope="row">Market shares</th>
				<td style="--value: 62;"><span>62%</span></td>
				<td style="--value: 15;"><span>15%</span></td>
				<td style="--value: 9;"><span>9%</span></td>
				<td style="--value: 5;"><span>5%</span></td>
				<td style="--value: 6;"><span>6%</span></td>
				<td style="--value: 3;"><span>3%</span></td>
			</tr>
			</tbody>
		</table>
	</div>

	<details>
		<summary><abbr title="HyperText Markup Language" aria-label="HyperText Markup Language">HTML</abbr></summary>
		<div><pre><code class="language-markup">&lt;table class="chaarts column" id="column" style="--y: 7;"&gt;
  &lt;caption id="caption-7"&gt;[…]&lt;/caption&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th scope="row"&gt;[…]&lt;/th&gt;
      &lt;th scope="col" style="--value: 62;"&gt;Chrome&lt;/th&gt;
      &lt;th scope="col" style="--value: 15;"&gt;Firefox&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th scope="row"&gt;[…]&lt;/th&gt;
      &lt;td style="--value: 62;"&gt;&lt;span&gt;62%&lt;/span&gt;&lt;/td&gt;
      &lt;td style="--value: 15;"&gt;&lt;span&gt;15%&lt;/span&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;</code></pre>
</div>
	</details>
	<details>
		<summary><abbr title="Cascading StyleSheet" aria-label="Cascading StyleSheet">css</abbr></summary>
		<div><pre><code class="language-css">@supports (display: contents) {
  .chaarts[class*="column"] {
    --gap: .5rem;
    --size: calc(var(--scale, 100) * 100%);
    --width: calc(64em / var(--y) - 1rem);
    display: grid;
    grid-column-gap: var(--gap);
    max-height: 64em;
    position: relative;
  }

  .chaarts[class*="column"] td,
  .chaarts[class*="column"] th {
    margin: 0;
  }

  .chaarts[class*="column"] tr &gt; * + * {
    text-align: center;
  }

  .chaarts[class*="column"] tr,
  .chaarts[class*="column"] tbody,
  .chaarts[class*="column"] thead {
    display: contents;
  }

  .chaarts[class*="column"] caption {
    grid-column: 1 / span var(--y);
    grid-row: -1;
  }

  .chaarts[class*="column"] td {
    --integer: calc(var(--value));
    grid-row: calc( (var(--scale, 100) + 2) - var(--integer) ) / -2;
    pointer-events: none;
    position: relative;
    transition: opacity .2s cubic-bezier(.5, 0, .5, 1);
  }

  .chaarts[class*="column"] span {
    font-weight: bold;
    bottom: 100%;
    left: 0;
    line-height: 1.5;
    pointer-events: auto;
    position: absolute;
    right: 0;
  }

  @supports (background-clip: text) or (-webkit-background-clip: text) {
    .chaarts[class*="column"] span {
      background: inherit;
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
  }

  /* @note Sass @each() */
  .chaarts[class*="column"] td:nth-of-type(2) {
    grid-column: 3;
  }

  .chaarts.column-single {
    grid-auto-columns: 1fr;
    grid-template-rows: 2ex repeat(var(--scale, 100), minmax(0, .25rem)) minmax(min-content, 2rem);
  }

  .chaarts.column-single tbody th {
    grid-row: -6 / -3;
    grid-column: 1;
    line-height: 1;
  }

  .chaarts.column-single thead * {
    grid-row: -2;
  }

  .chaarts.column-single td {
    --position: calc(var(--integer, 0) / var(--scale, 100) * 100%);
    background-blend-mode: hard-light;
      linear-gradient(to top,
        #01ac49,
        #444,
        mediumblue,
        rebeccapurple,
        crimson
      ) 0% var(--position) / 100% var(--size),
      var(--background) center / $gutter;
  }

  .chaarts.column-single [scope="col"]::after {
    background: whitesmoke var(--stripes);
    background-blend-mode: exclusion;
    bottom: 4rem;
    content: "";
    mix-blend-mode: multiply;
    opacity: 0;
    position: absolute;
    transition: opacity .3s cubic-bezier(.5, 0, .5, 1);
    top: 1rem;
    width: var(--width);
    z-index: 0;
  }

  .chaarts.column-single [scope="col"]:hover::after {
    opacity: .5;
  }

  /* @note Sass @each() */
  .chaarts.column-single [scope="col"]:nth-child(3)::after {
    left: calc(1em + (var(--width) * 2) + (var(--gap) * 2));
  }

  /* @note Sass @each() */
  .chaarts.column-single td:nth-of-type(2n + 2) {
    --background: var(--stripes);
  }

  @media screen and (-ms-high-contrast: active) {
    .chaarts.column-single td {
      background-image:
        linear-gradient(to top,
          Window,
          ButtonFace,
          ButtonShadow,
          ButtonText,
          highlight
        ),
        var(--background);
    }
  }
}</code></pre>
</div>
	</details>

	<h2>Multiple columns</h2>

	<p>
		In order to have <var>two</var> values for each main column, we must also have
		<var>two</var> subheadings. Concretely speaking:
	</p>

	<ol>
		<li>
			we add <strong>a second row</strong> in <code>&lt;thead&gt;</code>:
			<ul>
				<li>
					with <var>two</var> column header cells <code>&lt;th scope="col"&gt;</code>
					for each column header cell in the first row;
				</li>
				<li>
					remember to add <code>colspan="2"</code> on the first row's header cell
					to match the new table layout;
				</li>
				<li>
					and finally add an <strong>identifier</strong> to each header cell
					to referenced them to the relevant data cells —&nbsp;using the
					<code>headers</code> attribute, eg. for the first cell:
					<code>headers="browser chrome year chrome-2018"</code> where each value
					is a header cell's identifier.
				</li>
			</ul>
		</li>
		<li>
			<strong>Styles</strong>:
			<ul>
				<li>
					the first-level header cells must span two columns of the grid,
					as required by their <code>colspan</code> for the table layout. It is
					unfortunately <strong>impossible to use an attribute value</strong> in another
					property than <code>content</code> —&nbsp;otherwise we could simply write
					<code>grid-column: 2 / span attr(colspan);</code>, and <strong>that</strong> would be awesome…
				</li>
				<li>
					but no! Thus, a <var>--span</var> custom property is added on <code>&lt;table&gt;</code>,
					and must match the <code>colspan</code> attributes values mentionned earlier:
					it is therefore used to extend the first level headers to the appropriate number of columns.
				</li>
				<li>
					<strong>Colors and patterns</strong> are no longer applied according to each value,
					but according to each column —&nbsp;in the example, every second element
					(since we have <var>two</var> entries per column).
					Again, if we could use an attribute value or a custom property
					<strong>in a selector</strong>, that would be great. Imagine
					<code>tbody td:nth-of-type(var(--span)n + var(--span))</code> or even
					<code>tbody td:nth-of-type(attr(colspan)n + attr(colspan))</code>!
				</li>
			</ul>
		</li>
	</ol>

	<div class="chaarts-container column-container" role="group" aria-labelledby="caption-8">
		<div class="fieldset d-flex pi-1 sm-hidden no-js-hidden">
			<p class="label no-margin">
				<strong id="label-8">Switch</strong><br>
				<span id="description-8">Allows you to disable styles on the following table.</span>
			</p>
			<button type="button" class="mis-auto fw-400 no-border p-relative disable-css"
							role="switch" aria-checked="true"
							aria-labelledby="label-8" aria-describedby="description-8">
				<span>Funny</span>
				<span>Sober</span>
			</button>
		</div>

		<table class="chaarts column-multiple" id="column-multiple" style="--y: 11; --span: 2;">
			<caption id="caption-8">Browser market shares in France in January 2019</caption>
			<thead>
			<tr>
				<th scope="row" id="browser">Browser</th>
				<th scope="colgroup" colspan="2" id="chrome">Chrome</th>
				<th scope="colgroup" colspan="2" id="firefox">Firefox</th>
				<th scope="colgroup" colspan="2" id="safari">Safari</th>
				<th scope="colgroup" colspan="2" id="edge">Edge</th>
				<th scope="colgroup" colspan="2" id="ie">IE</th>
			</tr>
			<tr>
				<th scope="row" id="year">Year</th>
				<th scope="col" id="chrome-2018">2018</th>
				<th scope="col" id="chrome-2019">2019</th>
				<th scope="col" id="firefox-2018">2018</th>
				<th scope="col" id="firefox-2019">2019</th>
				<th scope="col" id="safari-2018">2018</th>
				<th scope="col" id="safari-2019">2019</th>
				<th scope="col" id="edge-2018">2018</th>
				<th scope="col" id="edge-2019">2019</th>
				<th scope="col" id="ie-2018">2018</th>
				<th scope="col" id="ie-2019">2019</th>
			</tr>
			</thead>
			<tbody>
			<tr>
				<th scope="row" id="parts">Market shares</th>
				<td style="--value: 49.6;" headers="browser chrome year chrome-2018"><span>49.6%</span></td>
				<td style="--value: 57;" headers="browser chrome year chrome-2019"><span>57%</span></td>
				<td style="--value: 11.74;" headers="browser firefox year firefox-2018"><span>11.74%</span></td>
				<td style="--value: 9.59;" headers="browser firefox year firefox-2019"><span>9.59%</span></td>
				<td style="--value: 21.53;" headers="browser safari year safari-2018"><span>21.53%</span></td>
				<td style="--value: 18.78;" headers="browser safari year safari-2019"><span>18.78%</span></td>
				<td style="--value: 3.72;" headers="browser edge year edge-2018"><span>3.72%</span></td>
				<td style="--value: 3.5;" headers="browser edge year edge-2019"><span>3.5%</span></td>
				<td style="--value: 4.46;" headers="browser ie year ie-2018"><span>4.46%</span></td>
				<td style="--value: 3.66;" headers="browser ie year ie-2019"><span>3.66%</span></td>
			</tr>
			</tbody>
		</table>
	</div>

	<details>
		<summary><abbr title="HyperText Markup Language" aria-label="HyperText Markup Language">HTML</abbr></summary>
		<div><pre><code class="language-markup">&lt;table class="chaarts column-multiple" id="column-multiple" style="--y: 11; --span: 2;"&gt;
  &lt;caption id="caption-8"&gt;[…]&lt;/caption&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th scope="row" id="browser"&gt;[…]&lt;/th&gt;
      &lt;th scope="col" colspan="2" id="chrome"&gt;Chrome&lt;/th&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th scope="row" id="year"&gt;[…]&lt;/th&gt;
      &lt;th scope="col" id="chrome-2018"&gt;2018&lt;/th&gt;
      &lt;th scope="col" id="chrome-2019"&gt;2019&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th scope="row" id="parts"&gt;[…]&lt;/th&gt;
      &lt;td style="--value: 50;" headers="browser chrome year chrome-2018"&gt;&lt;span&gt;49.6%&lt;/span&gt;&lt;/td&gt;
      &lt;td style="--value: 57;" headers="browser chrome year chrome-2019"&gt;&lt;span&gt;57%&lt;/span&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;</code></pre>
</div>
	</details>
	<details>
		<summary><abbr title="Cascading StyleSheet" aria-label="Cascading StyleSheet">css</abbr></summary>
		<div><pre><code class="language-css">@supports (display: contents) {
  .chaarts.column-multiple {
    grid-template-columns: minmax(min-content, 14ch) repeat(calc(var(--y) - 1), 1fr);
    grid-template-rows: 2ex repeat(var(--scale, 100), minmax(0, .25rem)) repeat(2, minmax(min-content, 2rem));
  }

  .chaarts.column-multiple span {
    background-image: none;
  }

  .chaarts.column-multiple tbody th {
    grid-row: -10 / span 7;
  }

  .chaarts.column-multiple thead tr * {
    grid-row: -2;
    grid-column: 1;
  }

  .chaarts.column-multiple thead tr *:nth-of-type(2) {
    grid-column: calc(4 - var(--span)) / span var(--span);
  }

  .chaarts.column-multiple thead tr + tr * {
    font-weight: normal;
    grid-row: -3;
  }

  .chaarts.column-multiple thead tr + tr *:nth-of-type(2) {
    grid-column: 2;
  }

  .chaarts.column-multiple tr:first-child [scope="col"]:nth-child(even)::after {
    background: whitesmoke var(--stripes);
    background-blend-mode: exclusion;
    bottom: 4rem;
    content: "";
    mix-blend-mode: multiply;
    opacity: .25;
    position: absolute;
    transition: opacity .3s cubic-bezier(.5, 0, .5, 1);
    top: calc(1rem + 2ex);
    width: calc((var(--width) * 2) + (var(--gap) / 2) + 1px);
    z-index: 0;
  }

  .chaarts.column-multiple tr:first-child [scope="col"]:nth-child(4)::after {
    left: calc(14ch + 1em + (((var(--width) * 2) + (var(--gap) / 2) + 1px) * 2) + (var(--gap) * 3));
  }

  .chaarts.column-multiple td {
    background: var(--chaarts-pink) var(--zig);
    grid-row-end: -3;
  }

  /* @note Oh boy, if we could use var(--span) in selector… */
  .chaarts.column-multiple td:nth-of-type(2n + 2) {
    background: var(--chaarts-blue) var(--triangles);
  }

  @media screen and (-ms-high-contrast: active) {
    .chaarts.column-multiple td {
      background-color: Window;
    }

    .chaarts.column-multiple td:nth-of-type(2n + 2) {
      background-color: Highlight;
    }
  }
}</code></pre>
</div>
	</details>
</main>

	<script src="js/scripts.min.js"></script>
	<script src="js/prism.min.js"></script>

</body>
</html>
