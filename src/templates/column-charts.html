{% extends "index.html" %}

{% block meta %}
  <title>Column charts — chaarts</title>
  <meta property="og:url" content="https://ffoodd.github.io/chaarts/column-charts.html">
  <meta property="og:title" content="Column charts — chaarts">
  <meta property="og:type" content="article">
  <meta property="og:description" name="description" content="Charts with HTML & CSS">
  <meta name="twitter:card" content="summary">
  <link rel="alternate" hreflang="fr" href="https://ffoodd.github.io/chaarts/histogramme.html"/>
{% endblock %}

{% block navigation %}
<ul class="fly-out">
  <li><a href="./index.html">Home</a></li>
  <li><a href="./bar-charts.html">Bar charts</a></li>
  <li><a href="./line-charts.html">Line charts</a></li>
  <li><a aria-current="page">Column charts</a></li>
  <li><a href="./pie-charts.html">Pie charts</a></li>
  <li><a href="./radar-charts.html">Radar charts</a></li>
  <li class="ml-auto">
    <a rel="alternate" hreflang="fr" lang="fr" href="./histogramme.html"
       aria-label="Version française" title="Version française">FR</a>
  </li>
  <li>
    <a href="https://github.com/ffoodd/chaarts/" class="d-flex">
      <svg viewBox="0 0 16 16" height="16" width="16" aria-hidden="true">
        <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
      </svg>
      &nbsp;GitHub
    </a>
  </li>
</ul>
{% endblock %}

{% block main %}
<h1>Column charts</h1>

<p>
 Column chart is used for <strong>value distributions</strong>.
 The structure of the table is quite ordinary, but its formatting is based on
 <code>display: grid;</code> and especially <code>display: contents;</code> to
 <strong>facilitate the placement of the cells</strong> —&nbsp;technique inspired by
 <a href="https://hiddedevries.nl/en/blog/2018-04-21-more-accessible-markup-with-display-contents">
 <cite>Hidde De Vries</cite>'s article <q>More accessible markup with <code>display: contents</code></q></a>,
 and clarified by <a href="https://bitsofco.de/how-display-contents-works/">
 <cite>Ire Aderinokun</cite>'s post <q>How <code>display: contents</code> works</q></a>.
</p>

<p>The basic principle is the same as <a href="./bar-charts.html">the bar charts</a>:</p>
<ol>
 <li>
  the <code>repeat()</code> function applied with the <var>--scale</var> custom property
  enables us to handle a dynamic scale;
 </li>
 <li>
  <code>&lt;thead&gt;</code>, <code>&lt;tbody&gt;</code> and <code>&lt;tr&gt;</code> containers
  are neutralized in the grid structure using <code>display: contents</code>;
 <li>
  each cell is placed on the grid depending its <var>--value</var>
  —&nbsp;its background color also depending on its value;
 </li>
 <li>
  and finally its text value —&nbsp;wrapped in a <code>&lt;span&gt;</code> element&nbsp;—
  is positioned at the top of the column using the same trick as in the bar chart.
 </li>
</ol>

<div class="table-container column-container" role="group" aria-labelledby="caption-7">
 <div class="fieldset d-flex sm-hidden">
  <p class="label no-margin">
   <strong id="label-7">Switch</strong><br>
   <span id="description-7">Allows you to disable styles on the following table.</span>
  </p>
  <button type="button" class="ml-auto fw-400 no-border p-relative disable-css"
      role="switch" aria-checked="true"
      aria-labelledby="label-7" aria-describedby="description-7">
   <span>Funny</span>
   <span>Sober</span>
  </button>
 </div>

 <table class="chaarts column-single" id="column" style="--y: 7;">
  <caption id="caption-7">Browser market shares in France in January 2019</caption>
  <thead>
   <tr>
    <th scope="row">Browser</th>
    <th scope="col" style="--value: 62;">Chrome</th>
    <th scope="col" style="--value: 15;">Firefox</th>
    <th scope="col" style="--value: 9;">Safari</th>
    <th scope="col" style="--value: 5;">Edge</th>
    <th scope="col" style="--value: 6;">IE</th>
    <th scope="col" style="--value: 3;">Others</th>
   </tr>
  </thead>
  <tbody>
   <tr>
    <th scope="row">Market shares</th>
    <td style="--value: 62;"><span>62%</span></td>
    <td style="--value: 15;"><span>15%</span></td>
    <td style="--value: 9;"><span>9%</span></td>
    <td style="--value: 5;"><span>5%</span></td>
    <td style="--value: 6;"><span>6%</span></td>
    <td style="--value: 3;"><span>3%</span></td>
   </tr>
  </tbody>
 </table>
</div>

<details>
 <summary><abbr title="HyperText Markup Language" aria-label="HyperText Markup Language">HTML</abbr></summary>
 <div>{% include 'includes/_column-markup.html' %}</div>
</details>
<details>
 <summary><abbr title="Cascading StyleSheet" aria-label="Cascading StyleSheet">css</abbr></summary>
 <div>{% include 'includes/_column-styles.html' %}</div>
</details>

<h2>Multiple columns</h2>

<p>
 In order to have <var>two</var> values for each main column, we must also have
 <var>two</var> subheadings. Concretely speaking:
</p>

<ol>
 <li>
  we add <strong>a second row</strong> in <code>&lt;thead&gt;</code>:
  <ul>
   <li>
    with <var>two</var> column header cells <code>&lt;th scope="col"&gt;</code>
    for each column header cell in the first row;
   </li>
   <li>
    remember to add <code>colspan="2"</code> on the first row's header cell
    to match the new table layout;
   </li>
   <li>
    and finally add an <strong>identifier</strong> to each header cell
    to referenced them to the relevant data cells —&nbsp;using the
    <code>headers</code> attribute, par exemple pour la première cellule:
    <code>headers="browser chrome year chrome-2018"</code> where each value
    is a header cell's identifier.
   </li>
  </ul>
 </li>
 <li>
  <strong>Styles</strong>:
  <ul>
   <li>
    the first-level header cells must span two columns of the grid,
    as required by their <code>colspan</code> for the table layout. It is
    unfortunately <strong>impossible to use an attribute value</strong> in another
    property than <code>content</code> —&nbsp;otherwise we could simply write
    <code>grid-column: 2 / span attr(colspan);</code>, and <strong>that</strong> would be awesome…
   </li>
   <li>
    but no! Thus, a <var>--span</var> custom property is added on <code>&lt;table&gt;</code>,
    and must match the <code>colspan</code> attributes values mentionned earlier:
    it is therefore used to extend the first level headers to the appropriate number of columns.
   </li>
   <li>
    <strong>Colors and patterns</strong> are no longer applied according to each value,
    but according to each column —&nbsp;in the example, every second element
    (since we have <var>two</var> entries per column).
    Again, if we could use an attribute value or a custom property
    <strong>in a selector</strong>, that would be great. Imagine
    <code>tbody td:nth-of-type(var(--span)n + var(--span))</code> or even
    <code>tbody td:nth-of-type(attr(colspan)n + attr(colspan))</code>!
   </li>
  </ul>
 </li>
</ol>

<div class="table-container column-container" role="group" aria-labelledby="caption-8">
 <div class="fieldset d-flex sm-hidden">
  <p class="label no-margin">
   <strong id="label-8">Switch</strong><br>
   <span id="description-8">Allows you to disable styles on the following table.</span>
  </p>
  <button type="button" class="ml-auto fw-400 no-border p-relative disable-css"
      role="switch" aria-checked="true"
      aria-labelledby="label-8" aria-describedby="description-8">
   <span>Funny</span>
   <span>Sober</span>
  </button>
 </div>

 <table class="chaarts column-multiple" id="column-multiple" style="--y: 11; --span: 2;">
  <caption id="caption-8">Browser market shares in France in January 2019</caption>
  <thead>
   <tr>
    <th scope="row" id="browser">Browser</th>
    <th scope="col" colspan="2" id="chrome">Chrome</th>
    <th scope="col" colspan="2" id="firefox">Firefox</th>
    <th scope="col" colspan="2" id="safari">Safari</th>
    <th scope="col" colspan="2" id="edge">Edge</th>
    <th scope="col" colspan="2" id="ie">IE</th>
   </tr>
   <tr>
    <th scope="row" id="year">Year</th>
    <th scope="col" id="chrome-2018">2018</th>
    <th scope="col" id="chrome-2019">2019</th>
    <th scope="col" id="firefox-2018">2018</th>
    <th scope="col" id="firefox-2019">2019</th>
    <th scope="col" id="safari-2018">2018</th>
    <th scope="col" id="safari-2019">2019</th>
    <th scope="col" id="edge-2018">2018</th>
    <th scope="col" id="edge-2019">2019</th>
    <th scope="col" id="ie-2018">2018</th>
    <th scope="col" id="ie-2019">2019</th>
   </tr>
  </thead>
  <tbody>
   <tr>
    <th scope="row" id="parts">Market shares</th>
    <td style="--value: 50;" headers="browser chrome year chrome-2018"><span>49.6%</span></td>
    <td style="--value: 57;" headers="browser chrome year chrome-2019"><span>57%</span></td>
    <td style="--value: 12;" headers="browser firefox year firefox-2018"><span>11.74%</span></td>
    <td style="--value: 10;" headers="browser firefox year firefox-2019"><span>9.59%</span></td>
    <td style="--value: 22;" headers="browser safari year safari-2018"><span>21.53%</span></td>
    <td style="--value: 19;" headers="browser safari year safari-2019"><span>18.78%</span></td>
    <td style="--value: 4;" headers="browser edge year edge-2018"><span>3.72%</span></td>
    <td style="--value: 3;" headers="browser edge year edge-2019"><span>3.5%</span></td>
    <td style="--value: 4;" headers="browser ie year ie-2018"><span>4.46%</span></td>
    <td style="--value: 3;" headers="browser ie year ie-2019"><span>3.66%</span></td>
   </tr>
  </tbody>
 </table>
</div>

<details>
 <summary><abbr title="HyperText Markup Language" aria-label="HyperText Markup Language">HTML</abbr></summary>
 <div>{% include 'includes/_columns-markup.html' %}</div>
</details>
<details>
 <summary><abbr title="Cascading StyleSheet" aria-label="Cascading StyleSheet">css</abbr></summary>
 <div>{% include 'includes/_columns-styles.html' %}</div>
</details>
<details>
 <summary>Chromium bug</summary>
 <p>
    There's a bug in Chromium at the time of writing —&nbsp;already filled
    <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=938927"
    target="_blank" rel="noopener noreferrer">a ticket on bugs.chromium.org</a>&nbsp;—
    when <strong>using a decimal value for grid placement</strong>.
    I don't know if it's an implication of the decimal, of the calculation, of the custom property…
    but at the moment, it doesn't work!
  </p>
  <h3>Reduced test case</h3>
  <div class="table-container column-container" role="group" aria-labelledby="caption-9">
   <div class="fieldset d-flex sm-hidden">
    <p class="label no-margin">
     <strong id="label-9">Switch</strong><br>
     <span id="description-9">Allows you to disable styles on the following table.</span>
    </p>
    <button type="button" class="ml-auto fw-400 no-border p-relative disable-css"
        role="switch" aria-checked="true"
        aria-labelledby="label-9" aria-describedby="description-9">
     <span>Funny</span>
     <span>Sober</span>
    </button>
   </div>

   <table class="chaarts column-multiple" id="column-multiple" style="--y: 11; --span: 2;">
    <caption id="caption-9">Browser market shares in France in January 2019</caption>
    <thead>
     <tr>
      <th scope="row" id="browser-2">Browser</th>
      <th scope="col" colspan="2" id="chrome-2">Chrome</th>
      <th scope="col" colspan="2" id="firefox-2">Firefox</th>
      <th scope="col" colspan="2" id="safari-2">Safari</th>
      <th scope="col" colspan="2" id="edge-2">Edge</th>
      <th scope="col" colspan="2" id="ie-2">IE</th>
     </tr>
     <tr>
      <th scope="row" id="year-2">Year</th>
      <th scope="col" id="chrome-2018-2">2018</th>
      <th scope="col" id="chrome-2019-2">2019</th>
      <th scope="col" id="firefox-2018-2">2018</th>
      <th scope="col" id="firefox-2019-2">2019</th>
      <th scope="col" id="safari-2018-2">2018</th>
      <th scope="col" id="safari-2019-2">2019</th>
      <th scope="col" id="edge-2018-2">2018</th>
      <th scope="col" id="edge-2019-2">2019</th>
      <th scope="col" id="ie-2018-2">2018</th>
      <th scope="col" id="ie-2019-2">2019</th>
     </tr>
    </thead>
    <tbody>
     <tr>
      <th scope="row" id="parts-2">Market shares</th>
      <td style="--value: 49.6;" headers="browser-2 chrome-2 year-2 chrome-2018-2"><span>49.6%</span></td>
      <td style="--value: 57;" headers="browser-2 chrome-2 year-2 chrome-2019-2"><span>57%</span></td>
      <td style="--value: 11.74;" headers="browser-2 firefox-2 year-2 firefox-2018-2"><span>11.74%</span></td>
      <td style="--value: 9.59;" headers="browser-2 firefox-2 year-2 firefox-2019-2"><span>9.59%</span></td>
      <td style="--value: 21.53;" headers="browser-2 safari-2 year-2 safari-2018-2"><span>21.53%</span></td>
      <td style="--value: 18.78;" headers="browser-2 safari-2 year-2 safari-2019-2"><span>18.78%</span></td>
      <td style="--value: 3.72;" headers="browser-2 edge-2 year-2 edge-2018-2"><span>3.72%</span></td>
      <td style="--value: 3.5;" headers="browser-2 edge-2 year-2 edge-2019-2"><span>3.5%</span></td>
      <td style="--value: 4.46;" headers="browser-2 ie-2 year-2 ie-2018-2"><span>4.46%</span></td>
      <td style="--value: 3.66;" headers="browser-2 ie-2 year-2 ie-2019-2"><span>3.66%</span></td>
     </tr>
    </tbody>
   </table>
  </div>
</details>
{% endblock %}
